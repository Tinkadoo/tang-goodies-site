<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3TWD5GPRHL"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-3TWD5GPRHL');
    </script>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cart | Tang Goodies</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
  </head>
  <body class="bg-rose-100 text-gray-800 min-h-screen flex flex-col">

    <header class="bg-rose-100 p-4 flex flex-wrap justify-between items-center gap-2">
      <div class="flex items-center space-x-2 min-w-[150px]">
        <img src="images/Logos/logo.png" alt="Tang Goodies Logo" class="h-10 w-auto" />
        <span class="text-3xl font-bold text-gray-800" style="font-family: 'Dancing Script', cursive;">Tang Goodies</span>
      </div>
      <nav class="flex flex-wrap justify-center gap-5 text-lg mt-2 sm:mt-0">
        <a href="index.html" class="hover:text-rose-500 font-semibold">Home</a>
        <a href="about.html" class="hover:text-rose-500 font-semibold">About</a>
        <a href="shop.html" class="hover:text-rose-500 font-semibold">Shop</a>
        <a href="contact.html" class="hover:text-rose-500 font-semibold">Contact</a>
        <a href="cart.html" class="relative flex items-center space-x-1 text-black font-semibold">
          <div class="relative">
            <i class="fas fa-shopping-cart text-xl"></i>
            <span id="cart-count-badge"
                  class="absolute -top-3 -right-3 bg-orange-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center ring-2 ring-white shadow">
              0
            </span>
          </div>
          <span class="ml-1 font-semibold text-xs hidden sm:inline">Cart</span>

        </a>
      </nav>
    </header>

    <!-- Line divider -->
    <div class="h-[5px] bg-rose-300"></div>
    
    <!-- Main Content -->
    <main class="text-gray-800 min-h-screen flex flex-col px-4 py-8">
        <div class="w-full sm:w-2/3 max-w-4xl mx-auto p-6 bg-white rounded-md shadow-md">
          <h1 class="text-3xl font-bold mb-4 text-left">Your Cart</h1>
          <hr class="border-t border-gray-300 mb-6">
      
          <!-- Cart items, subtotal, and buttons go here -->
          <div id="cart-items" class="space-y-4"></div>
          <div id="empty-message" class="text-center text-gray-500 hidden">üß∫ Your cart is empty!</div>

          <div class="flex justify-between mt-4 mb-4">
            <span class="font-semibold">Subtotal:</span>
            <span id="subtotal" class="font-semibold">$0.00</span>
          </div>

          <label class="block mb-1 font-semibold">Enter Delivery ZIP Code:</label>
          <input type="text" id="zip" class="border p-2 rounded w-32 mb-1" maxlength="5" placeholder="77494" />
          <p id="zip-warning" class="text-red-500 text-sm mb-4 hidden">We only deliver to ZIP code 77494.</p>
          <p class="text-sm text-gray-500 mb-4">üöö Delivery available in Katy, TX (77494) only.</p>

          <div class="flex justify-between items-center">
            <button 
                onclick="window.location.href='shop.html'" 
                class="bg-pink-600 text-white px-4 py-2 rounded disabled:opacity-50">
                Continue Shopping
            </button>
            <button id="checkout-btn" class="bg-pink-600 text-white px-4 py-2 rounded disabled:opacity-50" disabled>Checkout</button>
          </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="text-center text-sm text-gray-600 py-4">
      ¬© 2025 Tang Goodies. Website built by Mom ‚ù§Ô∏è
    </footer>

    <script src="scripts.js"></script>

    <script>
        const STORAGE_KEY = "cart";
      
        function loadCart() {
          const saved = localStorage.getItem(STORAGE_KEY);
          return saved ? JSON.parse(saved) : [];
        }
      
        function saveCart() {
          localStorage.setItem(STORAGE_KEY, JSON.stringify(cartData));
        }
      
        let cartData = loadCart();
      
        const cartItemsContainer = document.getElementById("cart-items");
        const subtotalEl = document.getElementById("subtotal");
        const zipInput = document.getElementById("zip");
        const zipWarning = document.getElementById("zip-warning");
        const checkoutBtn = document.getElementById("checkout-btn");
        const emptyMessage = document.getElementById("empty-message");
      
        function renderCart() {
          cartItemsContainer.innerHTML = "";
      
          if (cartData.length === 0) {
            emptyMessage.classList.remove("hidden");
            checkoutBtn.disabled = true;
            subtotalEl.textContent = "$0.00";
            return;
          } else {
            emptyMessage.classList.add("hidden");
          }
      
          cartData.forEach((item, index) => {
            const itemEl = document.createElement("div");
            itemEl.className = "flex items-center justify-between border-b pb-2";
      
            const imageUrl = item.image || "https://cdn-icons-png.flaticon.com/512/2917/2917990.png";
      
            itemEl.innerHTML = `
              <div class="flex items-center space-x-4">
                <img src="${imageUrl}" alt="${item.name}" class="w-14 h-14 object-cover rounded">
                <div>
                  <p class="font-semibold">${item.name}</p>
                  <p class="text-sm text-gray-500">$${item.price.toFixed(2)} each</p>
                </div>
              </div>
              <div class="flex items-center space-x-2">
                <button onclick="updateQuantity(${index}, -1)" class="px-2 bg-gray-200 rounded">‚àí</button>
                <input type="number" value="${item.qty}" min="1" class="w-12 text-center border rounded" onchange="setQuantity(${index}, this.value)">
                <button onclick="updateQuantity(${index}, 1)" class="px-2 bg-gray-200 rounded">+</button>
                <button onclick="removeItem(${index})" class="ml-3 text-red-600">üóëÔ∏è</button>
              </div>
            `;
            cartItemsContainer.appendChild(itemEl);
          });
      
          updateSubtotal();
        }
      
        function updateSubtotal() {
          const subtotal = cartData.reduce((sum, item) => sum + item.price * item.qty, 0);
          subtotalEl.textContent = `$${subtotal.toFixed(2)}`;
          validateCheckout();
        }
      
        function updateQuantity(index, change) {
            if (!cartData[index]) return;
            cartData[index].qty = Math.max(1, cartData[index].qty + change);
            saveCart();
            renderCart();
            updateCartCount();
        }
      
        function setQuantity(index, value) {
            if (!cartData[index]) return;
            cartData[index].qty = Math.max(1, parseInt(value) || 1);
            saveCart();
            renderCart();
            updateCartCount();
        }
      
        function removeItem(index) {
            cartData.splice(index, 1);
            saveCart();
            renderCart();
            updateCartCount();
        }
      
        function validateCheckout() {
          const zip = zipInput.value.trim();
          if (zip !== "77494") {
            zipWarning.classList.remove("hidden");
            checkoutBtn.disabled = true;
          } else {
            zipWarning.classList.add("hidden");
            checkoutBtn.disabled = cartData.length === 0;
          }
        }
      
        zipInput.addEventListener("input", validateCheckout);
      
        renderCart();
        updateCartCount();
    </script>

  </body>
</html>
